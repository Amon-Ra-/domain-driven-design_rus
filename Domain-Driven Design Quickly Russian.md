# Предисловие
## Почему DDD - это быстро?

Впервые я услышал о предметно-ориентированном проектировании когда встретил Эрика Эванса на небольшой встрече архитекторов, организованной Брюсом Экелем летом 2005 года. На этой встрече присутствовало много уважаемых людей, включая Мартина Фаулера, Рода Джонсона, Кэмерон Парди, Рэнди Стаффорд и Грегор Хохп.

Все оказались весьма впечатленв концепцией проектирования, ориентированной на предметную область, и нам не терпелось узнать о ней больше. У меня возникло ощущение, будто все хотели, чтобы эта концепция стала более распространенной. Я понял это когда заметил, как Эрик использовал модель предметной области для обсуждения решений некоторых технических проблем, которые мы обсуждали, и какое внимание он уделял бизнес-области, а не ажиотажу вокруг технологий, мне стало понят - это видение является одним из тех, которое очень нужно сообществу.

Мы, в сообществе энтерпрайз разработчиков, а особенно в сообществе веб-разработчиков, были испорчены многолетней шумихой, которая увела нас от правильной объектно-ориентированной разработки программного обеспечения. В сообществе Java хорошее моделирование предметной области было потеряно из-за ажиатажа вокруг [EJB](https://ru.wikipedia.org/wiki/Enterprise_JavaBeans) и моделей контейнеров/компонентов 1999-2004 годов. К счастью, технологические сдвиги и коллективный опыт сообщества разработчиков программного обеспечения возвращают нас к традиционным объектно-ориентированным парадигмам. Однако, сообществу не хватает четкого представления о том, как применять объектную ориентацию в масштабах предприятия, поэтому я считаю, что DDD важен.

К сожалению, за исключением небольшой группы самых высокопоставленных архитекторов, я заметил, что очень немногие люди знали о DDD, поэтому InfoQ поручила написание этой книги. Я надеюсь, что, опубликовав краткое, легко читаемое резюме и введение в основы DDD и сделав его бесплатным для загрузки на InfoQ вместе с недорогой карманной печатной версией, это видение может стать общепринятым.

Эта книга не вводит никаких новых понятий, но она пытается кратко изложить суть того, что же такое DDD, опираясь в основном на оригинальную книгу Эрика Эванса по этому вопросу, а также на другие опубликованные с тех пор источники, такие как «Применение DDD» Джимми Нильссона и различные дискуссионные форумы по DDD. Книга даст вам краткий курс по основам DDD, но она не заменит многочисленные примеры и тематические исследования, приведенные в книге Эрика, или практические примеры, представленные в книге Джимми. Я настоятельно рекомендую вам прочитать обе эти прекрасные работы. А пока, если вы согласны с тем, что сообществу нужно, чтобы DDD стал частью нашего группового сознания, сообщите людям об этой книге и работе Эрика.

_Флойд Маринеску_
_Соучредитель и главный редактор InfoQ.com_

>_Бесплатная онлайн-версия._
_Поддержите эту работу, купите печатную копию:_
http://www.infoq.com/minibooks/domain-drivendesign-quick

#Введение
Программное обеспечение — это инструмент, созданный, чтобы помочь нам справиться со сложностями современной жизни. Программное обеспечение — это просто средство для достижения цели, и обычно эта цель является чем-то очень практичным и реальным. Например, мы используем программное обеспечение для управления воздушным движением, и это напрямую связано с окружающим нас миром. Мы хотим летать из одного места в другое, и мы делаем это, используя сложное оборудование, поэтому мы создаем программное обеспечение для координации полета тысяч самолетов, которые в любой момент могут оказаться в воздухе. 

Программное обеспечение должно быть практичным и полезным; иначе мы бы не вкладывали столько времени и ресурсов в его создание. Это делает его чрезвычайно связанным с определенным аспектом нашей жизни. Полезный пакет программного обеспечения не может быть отделен от той сферы деятельности, в которой он должен помочь нам управлять, а дажен наоборот, программное обеспечение глубоко с ней связано. 

Дизайн программного обеспечения — это искусство, и, как и любое искусство, его нельзя преподавать и изучать как точную науку с помощью теорем и формул. Мы можем обнаружить принципы и приемы, полезные для применения на протяжении всего процесса создания программного обеспечения, но мы, вероятно, никогда не сможем указать точный путь от реальной потребности к программируемому кодовому модулю, предназначенному для удовлетворения этой потребности. Подобно изображению или зданию, программный продукт будет включать в себя индивидуальный подход тех, кто его спроектировал и разработал, что-то от харизмы и таланта (или его отсутствия) тех, кто способствовал его созданию и развитию. 

Существуют разные подходы к разработке программного обеспечения. За последние 20 лет индустрия программного обеспечения узнала и применила несколько методов для создания своих продуктов, каждый со своими преимуществами и недостатками. Цель этой книги — сосредоточиться на методе проектирования программных продуктов, который возник и развивался в течение последних двух десятилетий, но более четко сформировался в последние несколько лет: проектирование, ориентированное на предметную область. Эрик Эванс внес большой вклад в эту тему, записав в одной книге большую часть накопленных знаний о проектировании, ориентированном на предметную область. 

>Для более подробного изложения этой темы мы рекомендуем прочитать его книгу «Domain-Driven Design: Tackling Complexity in the Heart of Software», опубликованную Addison-Wesley, ISBN: 0-321-12521-5. Многие ценные идеи можно также получить, подписавшись на дискуссионную группу Domain Driven Design по адресу: http://groups.yahoo.com/group/domaindrivendesign. 

>_От переводчика:_
_Ссылки на книги о DDD на русском языке:_
_[Предметно-ориентированное проектирование (DDD). Структуризация сложных программных систем | Эванс Эрик](https://www.ozon.ru/product/predmetno-orientirovannoe-proektirovanie-ddd-strukturizatsiya-slozhnyh-programmnyh-sistem-147107976/)_
_[Вон Вернон: Предметно-ориентированное проектирование. Самое основное](https://www.labirint.ru/books/581925/)_

# Что такое предметно-ориентированное проектирование?
Разработка программного обеспечения чаще всего применяется для автоматизации процессов, существующих в реальном мире или для решения реальных бизнес-задач при этом автоматизируемые бизнес-процессы или реальные проблемы, связанны с программным обеспечением, которое является областью программного обеспечения. Мы должны понимать с самого начала, что программное обеспечение происходит из области бизнес-процессов и тесно связано с ней.

Программное обеспечение состоит из кода. У нас может возникнуть соблазн провести слишком много времени с кодом и рассматривать программное обеспечение как просто объекты и методы.

Рассмотрим производство автомобилей в качестве метафоры. Рабочие, занятые в автомобилестроении, могут специализироваться на производстве деталей автомобиля, но при этом они часто имеют ограниченное представление обо всем процессе производства автомобиля. Они начинают рассматривать автомобиль как огромный набор деталей, которые должны соединиться друг с другом, но автомобиль — это гораздо больше. Хороший автомобиль начинается с видения или представления. Все начинается с тщательно написанных спецификаций и продолжается проектированием. Много-много проектирования. Месяцы, а может и годы времени потрачены на проектирование, его изменение и доработку, пока он не достигнет совершенства, пока не станет отражать первоначальное представение. Проектирование обработки не только на бумаге. Большая часть этого включает в себя создание моделей автомобилей и их тестирование в определенных условиях, чтобы увидеть, работают ли они. В конструкцию вносятся изменения по результатам испытаний. В конечном итоге автомобиль отправляется в производство, а детали создаются и собираются вместе.

Разработка программного обеспечения аналогична. Мы не можем просто сесть и набрать код, а если точнее - мы можем это сделать, только вот работать это будет  для каких-то отдельных, тривиальных случаев,  но для сложных программ или программных комплексов так не получится.

Чтобы создать хороший софт, вы должны знать,для чего этот софт. Вы не сможете создать банковскую систему программного обеспечения, если у вас нет понимания того, что такое банковское дело, нужно понимать предметную область банковского дела.

Можно ли создать сложное банковское программное обеспечение, не зная предметной области? Ни за что! Никогда! Кто разбирается в банковском деле? Архитектор программного обеспечения? Нет. Он просто использует банк, чтобы хранить свои деньги в безопасности и иметь доступ к ним, когда они ему нужны. Программный аналитик? Не совсем. Он умеет анализировать заданную тему, когда ему даются все необходимые ингредиенты. Разработчик? Забудь это. Кто же тогда? Сотрудники банка, банкиры, кассиры, конечно. Банковскую систему очень хорошо понимают люди внутри самого банка, его специалисты. Они знают все детали, все подводные камни, возможные проблемы и правила. Вот с чего мы всегда должны начинать: с области или сферы самой деятельности.

Когда мы начинаем работу над проектом разработки, мы должны сосредоточиться на сфере деятельности, для  которой реализовываем проект. Вся цель программного обеспечения состоит в том, чтобы улучшить конкретный сферу деятельности. Для этого программное обеспечение должно гармонично вписываться в предметную область, для которой оно было создано. В противном случае это внесет напряжение в бизнес-процесс деятельности, спровоцирует сбои, повреждения и даже посеет хаос.

Как сделать так, чтобы программное обеспечение гармонично вписывалось в предметную область? Лучшим способом для этого будет сделать программное обеспечение отражением предметной области. Программное обеспечение должно включать в себя основные понятия и элементы предметной области и точно реализовывать отношения между ними. Программное обеспечение должно моделировать предметную область.

Кто-то, не разбирающийся в банковском деле, должен многому научиться, просто прочитав код в модели предметной области. Это очень важно, а иначе софт, корни которого не уходят глубоко в предметную область, не будет хорошо реагировать на изменения с течением времени.
Итак, начнем с предметной области. И что? Предметная область — это что-то из этого мира. Ее нельзя просто взять и влить через клавиатуру в компьютер, чтобы она стала кодом. Нам нужно создать абстракцию предметной области. Мы многое узнаем о сфере деятельности, разговаривая с экспертами в этой области. Но это необработанное знание будет нелегко преобразовать в программные конструкции, если мы не создадим его абстракцию, план в своем уме. В начале план всегда неполный. Но со временем, работая над ним, мы делаем его лучше, и он становится для нас все более и более понятным. Что это за абстракция? Это модель, модель предметной области. По словам Эрика Эванса, модель предметной области — это не конкретная диаграмма; это идея, которую диаграмма призвана передать. Это не просто знания в голове эксперта в предметной области; это строго организованная и избирательная абстракция этого знания. Диаграмма может представлять и передавать модель, как и тщательно написанный код, как и предложение.

Модель — это наше внутреннее представление целевой области, и она очень необходима на протяжении всего процесса проектирования и разработки. В процессе проектирования мы запоминаем и делаем множество ссылок на модель. Мир вокруг нас слишком велик для нашего разума. Даже конкретная область может быть больше, чем человеческий разум может обрабатывать одновременно. Нам нужно организовать информацию, систематизировать ее, разделить на более мелкие части, сгруппировать эти части в логические модули, брать по одной и обрабатывать ее. Нам даже нужно оставить некоторые части области деятельности. Вся область может содержать слишком много информации, чтобы включить ее всю в модель. И многое из этого даже не нужно рассматривать. Это вызов сам по себе. Что оставить, а что выбросить? Это часть проектирования, процесса создания программного обеспечения. Банковское программное обеспечение обязательно отследит адрес клиента, но его не должен волновать цвет глаз клиента. Это очевидный случай, но другие примеры могут быть не столь очевидными.
Модель является неотъемлемой частью разработки программного обеспечения. Нам это нужно для того, чтобы иметь возможность справиться со сложностью. Весь наш мыслительный процесс о предметной области синтезируется в этой модели. Это хорошо, но это должно выйти из нашей головы. Согласитесь не очень-то правильно будет, если оно остается там, не так ли? Нам необходимо сообщить об этой модели экспертам в предметной области, коллегам-дизайнерам и разработчикам.

Модель — это сущность программного обеспечения и нам нужно создать способ ее выражения чтобы донести ее до других. Мы не одни в этом процессе, поэтому нам нужно делиться знаниями и информацией, и делать это нужно хорошо, точно, полностью и без двусмысленности. Есть разные способы сделать это. Один — графический: диаграммы, варианты использования, рисунки, картинки и т.д. Другой — письменный. Записываем свое видение области. Но другое дело язык. Мы можем и должны создать язык для обсуждения конкретных вопросов, касающихся предметной области. Все это подробно будет описано позже, а сейчас главное, что нам нужно предоставить модель.

Когда у нас есть выраженная модель, мы можем приступить к разработке кода. Это отличается от проектирования программного обеспечения. Проектирование программного обеспечения похоже на создание архитектуры дома, это общая картина. С другой стороны, дизайн кода работает над деталями, такими как расположение картины на определенной стене. Дизайн кода также очень важен, но не так фундаментален, как дизайн (проектирование) программного обеспечения. Ошибку в дизайне кода обычно легче исправить, в то время как ошибки в архитектуре программного обеспечения исправляются гораздо дороже. Одно дело передвинуть картину левее, и совсем другое дело снести одну стену дома, чтобы сделать по-другому. Тем не менее конечный продукт не будет хорошим без хорошо написанного кода. Здесь пригодятся шаблоны проектирования кода, и их следует применять по мере необходимости. Хорошие методы программирования помогают создать чистый, удобный для сопровождения код.

Существуют разные методологии и подходы к управлению проекта разработки программного обеспечения. Одним из них является методология водопада. Этот метод включает в себя ряд этапов. Бизнес-эксперты выдвигают ряд требований, которые прорабатываются бизнес-аналитикам. Аналитики создают модель на основе этих требований и передают результаты разработчикам, а те, в свою очередь, начинают разрабатывать на основе того, что они получили. Это односторонний поток знаний. Несмотря на то, что это традиционный подход к управлению проектом разработки программного обеспечения, который использовался с определенным успехом на протяжении многих лет, у него есть свои недостатки и ограничения. Основная проблема в том, что нет обратной связи от аналитиков к бизнес-экспертам или от разработчиков к аналитикам.

Другой подход — Agile методологии, такие как экстремальное программирование. Эти методологии представляют собой коллективное движение против водопадного подхода, возникающее из-за трудностей, связанных с попытками заранее сформулировать все требования, особенно в свете постоянных изменений требований. Очень сложно создать полную модель, которая заранее охватывает все аспекты предметной области. Это требует много размышлений, и часто вы просто не можете увидеть все проблемы с самого начала, а также не можете предвидеть некоторые негативные побочные эффекты или ошибки архитектуре программного обеспечения. Еще одна проблема, которую Agile пытается решить, — это так называемый «аналитический паралич», когда члены команды настолько боятся принимать какие-либо проектные или архитектурные решения, что вообще не достигают прогресса. Хотя сторонники Agile признают важность проектных решений, они сопротивляются предварительному проектированию. Вместо этого они используют большую гибкость реализации, и благодаря итеративной разработке с постоянным участием заинтересованных сторон бизнеса и большим количеством рефакторингов команда разработчиков получает больше информации о предметной области клиента и может лучше производить программное обеспечение, отвечающее потребностям клиентов.

Методы Agile имеют свои проблемы и ограничения; они выступают за простоту, но у каждого свой взгляд на то, что это значит. Кроме того, непрерывный рефакторинг, проводимый разработчиками без твердых принципов проектирования, приведет к созданию кода, который будет трудно понять или изменить. И хотя водопадный подход может привести к чрезмерной инженерии, страх перед чрезмерной инженерией может привести к другому страху: страху сделать глубокий, тщательно продуманный дизайн.